matrix:
  include:
  - language: python
    python: "3.5"
    before_install:
      - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
      - sudo apt-get update -qq
      - sudo apt-get install -qq qt5-qmake qtbase5-dev qtdeclarative5-dev libqt5webkit5-dev libsqlite3-dev qt5-default
      - sudo apt-get install -qq gcc-4.8 g++-4.8 
      # We want to compile with g++ 4.8 when rather than the default g++
      #- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90
      qmake --version
      g++ --version
    install: "pip install pyyaml"
    script: make test
  - language: android
    jdk: oraclejdk8
    before_install:
      - sudo apt-get install python3 python3-pip
      - sudo pip3 install pyyaml
    install:
      - echo yes | sdkmanager "extras;m2repository;com;android;support;constraint;constraint-layout;1.0.2"
      - echo yes | sdkmanager "extras;m2repository;com;android;support;constraint;constraint-layout-solver;1.0.2"
    android:
      components:
        - tools
        - android-26
          - build-tools-26.0.2
    before_script: 
    script: make test && make android
